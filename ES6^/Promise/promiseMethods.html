<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //如果then方法中返回了一个Promise对象，那就以这个对象为准，返回它的结果
      //   let p = new Promise((resolve, reject) => {
      //     resolve(1);
      //   });

      //   p.then((data) => {
      //     return new Promise((resolve, reject) => {
      //       resolve(2);
      //     });
      //   }).then((data) => {
      //     console.log(data);
      //   });

      //Promise.resolve()方法，接受一个值，将现有对象转为Promise对象
      //   let p1 = Promise.resolve(value);

      //Promise.reject()方法，返回一个带有拒绝原因的Promise对象
      //   let p2 = Promise.reject(value);

      //Promise.all()用于将多个Promise实例包装成一个新的Promise实例，参数为一组Promise实例组成的数组
      //   let p3 = Promise.resolve(1);
      //   let p4 = Promise.resolve(2);
      //   let p5 = Promise.resolve(3);

      //   let p = Promise.all([p1, p2, p3]);

      //   p.then((data) => {
      //     console.log(data);
      //   });

      //   const fn = () => console.log("fn");
      //   (() => new Promise((resolve) => resolve(fn())))()
      //     .then(() => {
      //       console.log(222);
      //     })
      //     .catch((err) => {
      //       console.log(err);
      //     });

      //   const fn = () => console.log("fn");
      //   (async () => fn())()
      //     .then(() => {
      //       console.log(222);
      //     })
      //     .catch((err) => {
      //       console.log(err);
      //     });

      //   const fn = () => console.log("fn");
      //   Promise.try(fn)
      //     .then(() => {
      //       console.log(222);
      //     })
      //     .catch((err) => {
      //       console.log(err);
      //     });

      //   console.log("111");

      //异步回调中抛错catch捕捉不到
      //   const p = new Promise((resolve, reject) => {
      //     throw new Error("这是一个错误");
      //   });
      //   p.catch((err) => {
      //     console.log(error);
      //   });

      //使用try catch捕获异常主动触发reject
      const p = new Promise((resolve, reject) => {
        setTimeout(() => {
          try {
            throw new Error("error");
          } catch (e) {
            reject(e);
          }
        }, 0);
      });
      p.catch((err) => {
        console.log(error);
      });
    </script>
  </body>
</html>
